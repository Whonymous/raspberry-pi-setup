1.2 WiFi
===

### Handy WiFi commands

- Scan for nearby wifi: `iwlist wlan0 scan`
- Turn WiFi on/off: `ifup wlan0` and `ifdown wlan0`
- Or (works better, it seems) restart WiFi using `sudo /etc/init.d/networking restart`


### Set-up WiFi

1. Insert the following into `/etc/network/interfaces`:
    
		# Enable wlan on boot:
		auto wlan0
		# Other options instead of 'manual' are 'static' and 'dhcp'.
		# 'manual' tells it to use the following config file
		iface wlan0 inet manual
		# Using this config file:
		wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
		# wlan0 will loop back to this default
		iface default inet dhcp

2. And in `/etc/wpa_supplicant/wpa_supplicant.conf` (change ssid and password to your own):

		ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
		update_config=1
		network={
			ssid="not telling"
			psk="not telling"
			# RSN == WPA2
			proto=RSN
			key_mgmt=WPA-PSK
			# CCMP == AES
			pairwise=CCMP
			# Required for WPA and WPA2:
			auth_alg=OPEN
			# Optional, to replace 'default' in previous file:
			# id_str="home" # or whatever
		}

If the WiFi password is so precious that other people using the computer may not know it:

		chmod 0600 /etc/network/interfaces


### Set-up WiFi with static ip

Note that instead of setting a static ip in de Raspberry, it would be a better solution to NOT use a static ip and let the router always set the same ip to the RPi, to avoid ip-clashes.
See [the post by jb1000][staticip1] and [this][staticip2].

Anyway, edit `/etc/network/interfaces` and replace the last line (`iface default inet dhcp`) with this:
    
		iface default inet static
		address 192.168.1.10
		netmask 255.255.255.0
		gateway 192.168.1.1

Where `192.168.1.10` should be replaced by the desired static ip.


### Disable WiFi sleep

For permament SSH access from the outside, the WiFi adapter should not go to sleep. The following explanation only works for dongles with Realtek 8192cu chip.

Check if power management is enabled: 

		cat /sys/module/8192cu/parameters/rtw_power_mgnt

If it returns 0 power management is disabled, 1 means minimal power management, 2 means maximum power management. To disable it, create a file at `sudo nano /etc/modprobe.d/8192cu.conf` and insert:

		# Disable power management
		options 8192cu rtw_power_mgnt=0

Reboot the Raspberry to activate: `sudo reboot`.
