4.1 Resilio Sync
===

[Resilio Sync][rslsync] (formerly BitTorrent Sync) is an awesome way of replacing Dropbox with your a self-hosted, peer-to-peer based, private version. If your concerned about the security or the closed-source nature of Sync you might be better of using [Syncthing][syncthing] instead, which is a bit more immature at the moment (in my opinion) but fully open source.


### Install

For security reasons it's usually best to install daemons as a separate user without root permissions. Let's create a user:

    adduser rslsync

Follow the steps, then `cd /home/rslsync` into the new user's home directory and download Sync:

    sudo -s -u rslsync
    wget https://download-cdn.resilio.com/stable/linux-arm/resilio-sync_arm.tar.gz
    tar -xzf resilio-sync_arm.tar.gz
    rm resilio-sync_arm.tar.gz
    ./rslsync --dump-sample-config >> rslsync.conf

#### Configure

You now have the executable in user `rslsync`'s home directory, with a configuration file called `rslsync.conf`. *Modify the configuration file to your wishes before you continue*. I use the following settings:

- `"disk_low_priority": true`,
- `"use_upnp" : false` because I configure my router manually,
- `"lan_encrypt_data": false` because encryption is though for the Pi,
- `"use_gui" : false` for extra security,
- `"folder_rescan_interval": 1800` because I never manipulate synced files on the Pi directly, scanning the synced folder isn't needed very often.
- modify the value for `"listening_port"` to a port you've opened for inbound traffic in [iptables][iptables].

#### Run

Next, you'll want the app to run as a daemon in the background and to automatically run on boot, so for this purpose it's best to put a script in `/etc/init.d/`. [Here's an example script][script] that you can save as `/etc/init.d/rslsync`.

Once you have saved the script (and possibly modified it to your wishes), make it run on boot using the following:

    sudo chmod +x /etc/init.d/rslsync
    sudo update-rc.d rslsync defaults

You can now do the following:

- `sudo service rslsync start` to run Sync,
- `sudo service rslsync stop` to stop it,
- `update-rc.d rslsync remove` to remote BTSync from boot.

[rslsync]: https://www.resilio.com/individuals/
[syncthing]: http://syncthing.net/
[iptables]: ./2.1-iptables.md
[script]: ./scripts/btsync
